<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Car Lease</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/css/font-awesome.min.css" rel="stylesheet" />
    <link href="/css/global.css" rel="stylesheet" />
    <link href="/css/index.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />
    <script src="/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <div class="main clearfix position-relative">
      <div class="main_1 clearfix position-absolute top-0 w-100">
        <section id="header">
          <nav
            class="navbar navbar-expand-md navbar-light"
            id="navbar_sticky"
            style="background-color: rgba(0, 0, 0, 0.9)"
          >
            <div class="container-xl">
              <a class="navbar-brand fs-3 p-0 fw-bold text-white" href="/index"
                ><img
                  src="https://firebasestorage.googleapis.com/v0/b/rent-car-30b65.appspot.com/o/images%2Ffavicon.png?alt=media&token=a47f67b1-774e-44ef-845b-2c8a1594ed4a"
                  alt=""
                  height="30px"
                />
                <br />
              </a>
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mb-0">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/index"
                      >Home</a
                    >
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="/cars/list">Vehicle Models </a>
                  </li>
                </ul>
                <ul class="navbar-nav mb-0 ms-auto">
                  <li class="nav-item">
                    <a class="nav-link" href="/user"
                      ><%= userGreet.username %></a
                    >
                  </li>
                  <li class="nav-item">
                    <a class="nav-link button_2 ms-2 me-2" href="/logout"
                      >Logout <i class="fa fa-check-circle ms-1"></i
                    ></a>
                  </li>
                </ul>
              </div>
            </div>
          </nav>
        </section>
        <section id="center" class="center_home">
          <div
            id="carouselExampleCaptions"
            class="carousel slide"
            data-bs-ride="carousel"
          >
            <div class="carousel-indicators">
              <button
                type="button"
                data-bs-target="#carouselExampleCaptions"
                data-bs-slide-to="0"
                class="active"
                aria-label="Slide 1"
              ></button>
              <button
                type="button"
                data-bs-target="#carouselExampleCaptions"
                data-bs-slide-to="1"
                aria-label="Slide 2"
                class=""
                aria-current="true"
              ></button>
              <button
                type="button"
                data-bs-target="#carouselExampleCaptions"
                data-bs-slide-to="2"
                aria-label="Slide 3"
              ></button>
            </div>
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img
                  src="https://firebasestorage.googleapis.com/v0/b/rent-car-30b65.appspot.com/o/images%2Fcover1.jpg?alt=media&token=aa455e0a-fc78-49d2-8be1-1dfdbeb59799"
                  class="d-block w-100"
                  alt="..."
                />
                <div class="carousel-caption d-md-block">
                  <h5>Lên kế hoạch thuê xe ngay!</h5>
                  <h1 class="font_50 mt-4">
                    Đã uống <span class="col_oran">xe</span> đừng lái <br />
                    <span class="col_oran">Rượu bia</span>
                  </h1>
                  <p class="mt-4 mb-4">
                    Thuê xe ngay với dịch vụ của Tứ bất tửu!
                  </p>
                  <h6 class="d-inline-block me-2 mb-0">
                    <a class="button" href="/cars/list"
                      >Chọn xe ngay <i class="fa fa-check-circle ms-1"></i>
                    </a>
                  </h6>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="https://firebasestorage.googleapis.com/v0/b/rent-car-30b65.appspot.com/o/images%2Fcover2.jpg?alt=media&token=62a4cf4f-4410-4e5a-8fe3-f10a12553b62"
                  class="d-block w-100"
                  alt="..."
                />
                <div class="carousel-caption d-md-block">
                  <h5>Lên kế hoạch thuê xe ngay!</h5>
                  <h1 class="font_50 mt-4">
                    Xe bạn đã đổ <span class="col_oran">rượu</span> chưa?
                  </h1>
                  <p class="mt-4 mb-4">
                    Thuê xe ngay với dịch vụ của Tứ bất tửu!
                  </p>
                  <h6 class="d-inline-block me-2 mb-0">
                    <a class="button" href="/cars/list"
                      >Chọn xe ngay <i class="fa fa-check-circle ms-1"></i>
                    </a>
                  </h6>
                </div>
              </div>
              <div class="carousel-item">
                <img
                  src="https://firebasestorage.googleapis.com/v0/b/rent-car-30b65.appspot.com/o/images%2Fcover3.jpg?alt=media&token=806b2d9a-2ad8-46eb-9435-82975f3c8498"
                  class="d-block w-100"
                  alt="..."
                />
                <div class="carousel-caption d-md-block">
                  <h5>Lên kế hoạch thuê xe ngay!</h5>
                  <h1 class="font_50 mt-4">
                    Hôn môi đừng hôn <span class="col_oran">mông</span> em
                  </h1>
                  <p class="mt-4 mb-4">
                    Thuê xe ngay với dịch vụ của Tứ bất tửu!
                  </p>
                  <h6 class="d-inline-block me-2 mb-0">
                    <a class="button" href="/cars/list"
                      >Chọn xe ngay <i class="fa fa-check-circle ms-1"></i>
                    </a>
                  </h6>
                </div>
              </div>
            </div>
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#carouselExampleCaptions"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#carouselExampleCaptions"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </section>
        <section id="booking">
          <div class="container-xl">
            <form action="" method="post">
              <div class="booking_m clearfix bg-white">
                <div class="row booking_1">
                  <div class="col-md-12">
                    <h4 class="mb-0">Book a car</h4>
                  </div>
                </div>
                <div class="row booking_2 mt-4">
                  <div class="col-md-4 col-sm-6">
                    <div class="booking_2i">
                      <h6 class="mb-3">
                        <i class="fa fa-car me-1 col_oran"></i> Loại xe bạn chọn
                      </h6>
                      <select
                        class="form-select"
                        id="example-select"
                        name="nameCarSelect"
                      >
                        <option><%= car.car_model %></option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-4 col-sm-6">
                    <div class="booking_2i">
                      <h6 class="mb-3">
                        <i class="fa fa-map-marker me-1 col_oran"></i> Nhận xe
                      </h6>
                      <select
                        class="form-select"
                        id="example-select"
                        name="pickupLocation"
                      >
                        <% pickLocations.forEach(location => { %>
                        <option><%= location %></option>
                        <% }) %>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-4 col-sm-12">
                    <div class="booking_2i">
                      <h6 class="mb-3">
                        <i class="fa fa-map-marker me-1 col_oran"></i> Trả xe
                      </h6>
                      <select
                        class="form-select"
                        id="example-select"
                        name="dropofLocation"
                      >
                        <% dropLocations.forEach(location => { %>
                        <option><%= location %></option>
                        <% }) %>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row booking_2 mt-4">
                  <div class="col-md-4 col-sm-6">
                    <div class="booking_2i">
                      <textarea
                        type="text"
                        cols="30"
                        rows="10"
                        id="bookedDatePickup"
                        hidden="hidden"
                      >
                                        <% rentalDetail.forEach(element => { %>
                                            <%= element.datePickup + ',' %>
                                        <% }) %>
                                    </textarea
                      >
                      <textarea
                        type="text"
                        cols="30"
                        rows="10"
                        id="bookedDateDrop"
                        hidden="hidden"
                      >
                                        <% rentalDetail.forEach(element => { %>
                                            <%= element.dateDrop + ',' %>
                                        <% }) %>
                                    </textarea
                      >
                      <h6 class="mb-3">
                        <i class="fa fa-calendar me-1 col_oran"></i> Thời gian
                        thuê xe
                      </h6>
                      <div class="booking_2i1 row">
                        <div class="col-md-8">
                          <div class="booking_2i1l">
                            <input
                              class="form-control"
                              id="datePickup"
                              type="datetime-local"
                              name="datePickup"
                              onchange="validateDates()"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 col-sm-6">
                    <div class="booking_2i">
                      <h6 class="mb-3">
                        <i class="fa fa-calendar me-1 col_oran"></i> Thời gian
                        trả xe
                      </h6>
                      <div class="booking_2i1 row">
                        <div class="col-md-8">
                          <div class="booking_2i1l">
                            <input
                              class="form-control"
                              id="dateDropof"
                              type="datetime-local"
                              name="dateDropof"
                              onchange="validateDates()"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 col-sm-12">
                    <div class="booking_2i">
                      <h6 class="mb-3">
                        <i class="fa fa-info me-1 col_oran"></i>
                      </h6>
                      <h6 class="text-center mb-0">
                        <button
                          id="bookingButton"
                          class="button pt-3 pb-3 d-block"
                          type="submit"
                          disabled
                        >
                          Chi tiết đặt xe
                        </button>
                      </h6>
                    </div>
                  </div>
                </div>
                <small id="validateDateMessage"></small>
              </div>
            </form>
          </div>
        </section>
        <section id="footer" class="pt-3 pb-3">
          <div class="container-xl">
            <div class="row footer_1">
              <div class="col-md-4">
                <div class="footer_1i">
                  <h4>
                    <a href="/index"
                      ><img
                        src="https://firebasestorage.googleapis.com/v0/b/rent-car-30b65.appspot.com/o/images%2Flogo_ngang.png?alt=media&token=eb867fee-8c4f-4263-afc9-2ccc695a9007"
                        alt=""
                        height="60px"
                      />
                    </a>
                  </h4>
                  <p class="mt-3">Đừng lái xe, hãy để xe lái bạn!</p>
                  <h6 class="mt-3 fw-normal">
                    <i class="fa fa-map col_oran me-1"></i> Hapulico 17T4, Thanh
                    Xuân, Hà Nội
                  </h6>
                  <h6 class="mt-3 fw-normal">
                    <a href="#"
                      ><i class="fa fa-phone col_oran me-1"></i> (888)
                      666-8888</a
                    >
                  </h6>
                  <h6 class="mt-3 mb-0 fw-normal">
                    <a href="#"
                      ><i class="fa fa-envelope col_oran me-1"></i>
                      admin@4tuuteam.vn</a
                    >
                  </h6>
                </div>
              </div>
              <div class="col-md-3">
                <div class="footer_1i">
                  <h4>THỜI GIAN LÀM VIỆC</h4>
                  <p class="mt-3">
                    Mon - Fri:
                    <span class="fw-bold text-black">09:00AM - 09:00PM</span>
                  </p>
                  <p class="mt-3">
                    Sat:
                    <span class="fw-bold text-black">09:00AM - 06:00PM</span>
                  </p>
                  <p class="mt-3 mb-0">
                    Sun: <span class="fw-bold text-black">Closed</span>
                  </p>
                </div>
              </div>
            </div>
            <hr />
            <div class="row footer_2">
              <div class="col-md-8">
                <div class="footer_2l">
                  <p class="mb-0 mt-1">
                    © 2023 Tứ Tửu Team | Việt Music - Hiếu Bé - Thuấn - Văn
                  </p>
                </div>
              </div>
              <div class="col-md-4">
                <div class="footer_2r text-end">
                  <ul class="social-network social-circle mb-0">
                    <li>
                      <a href="#" class="icoRss" title="Rss"
                        ><i class="fa fa-rss"></i
                      ></a>
                    </li>
                    <li>
                      <a href="#" class="icoFacebook" title="Facebook"
                        ><i class="fa fa-pinterest"></i
                      ></a>
                    </li>
                    <li>
                      <a href="#" class="icoTwitter" title="Twitter"
                        ><i class="fa fa-twitter"></i
                      ></a>
                    </li>
                    <li>
                      <a href="#" class="icoLinkedin" title="Linkedin"
                        ><i class="fa fa-linkedin"></i
                      ></a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>

    <script>
      window.onscroll = function () {
        myFunction();
      };

      var navbar_sticky = document.getElementById("navbar_sticky");
      var sticky = navbar_sticky.offsetTop;
      var navbar_height = document.querySelector(".navbar").offsetHeight;

      function myFunction() {
        if (window.pageYOffset >= sticky + navbar_height) {
          navbar_sticky.classList.add("sticky");
          document.body.style.paddingTop = navbar_height + "px";
        } else {
          navbar_sticky.classList.remove("sticky");
          document.body.style.paddingTop = "0";
        }
      }
    </script>

    <script>
      function cutStr(str) {
        let arr = str.trim().split(",");
        for (let i = 0; i < arr.length; i++) {
          arr[i] = arr[i].trim();
        }
        arr.pop();
        return arr;
      }

      function validateDates() {
        const datePickupInput = document.getElementById("datePickup");
        const dateDropofInput = document.getElementById("dateDropof");
        const pickupDate = new Date(datePickupInput.value);
        const dropofDate = new Date(dateDropofInput.value);
        const arrayBookedDatePickup = cutStr(
          document.getElementById("bookedDatePickup").innerHTML
        );
        const arrayBookedDateDrop = cutStr(
          document.getElementById("bookedDateDrop").innerHTML
        );
        const today = new Date();
        if (pickupDate < today) {
          document.getElementById("validateDateMessage").innerHTML =
            "*Ngày thuê xe phải sau ngày hiện tại.";
          datePickupInput.value = "";
          bookingButton.disabled = true;
          return;
        }
        if (!datePickupInput.value) {
          document.getElementById("validateDateMessage").innerHTML =
            "*Vui lòng chọn ngày thuê xe.";
          bookingButton.disabled = true;
          return;
        }
        if (!dateDropofInput.value) {
          document.getElementById("validateDateMessage").innerHTML =
            "*Vui lòng chọn ngày trả xe.";
          bookingButton.disabled = true;
          return;
        }
        if (dropofDate <= pickupDate) {
          document.getElementById("validateDateMessage").innerHTML =
            "*Ngày trả xe phải sau ngày thuê xe.";
          dateDropofInput.value = "";
          bookingButton.disabled = true;
          return;
        }
        for (let i = 0; i < arrayBookedDatePickup.length; i++) {
          const bookedPickupDate = new Date(arrayBookedDatePickup[i]);
          const bookedDropofDate = new Date(arrayBookedDateDrop[i]);
          if (
            (pickupDate >= bookedPickupDate && pickupDate < bookedDropofDate) ||
            (dropofDate > bookedPickupDate && dropofDate <= bookedDropofDate) ||
            (pickupDate <= bookedPickupDate && dropofDate >= bookedDropofDate)
          ) {
            document.getElementById("validateDateMessage").innerHTML =
              "*Ngày thuê và ngày trả xe bị trùng với lịch đã được đặt.";
            bookingButton.disabled = true;
            return;
          }
        }
        document.getElementById("validateDateMessage").innerHTML =
          "*Ngày bạn chọn phù hợp.";
        bookingButton.disabled = false;
      }
    </script>
  </body>
</html>
